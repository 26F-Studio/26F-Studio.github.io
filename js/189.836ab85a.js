"use strict";(globalThis["webpackChunk_26f_studio"]=globalThis["webpackChunk_26f_studio"]||[]).push([[189],{475:(e,l,a)=>{a.r(l),a.d(l,{default:()=>E});a(3122);var t=a(9835),s=a(6970);const o={class:"q-gutter-y-lg"},i={class:"row justify-center"},n={class:"column q-gutter-y-sm"},d={class:"text-color-grey text-font-inter-bold",style:{"font-size":"1rem"}},r={class:"column q-gutter-y-sm"},u={class:"text-color-grey text-font-inter-bold",style:{"font-size":"1rem"}},c={class:"column q-gutter-y-sm"},m={class:"text-color-grey text-font-inter-bold",style:{"font-size":"1rem"}},p={class:"row justify-center items-center text-color-primary text-font-inter-bolder"};function g(e,l,a,g,w,v){const y=(0,t.up)("q-skeleton"),f=(0,t.up)("q-icon"),k=(0,t.up)("q-img"),b=(0,t.up)("q-btn"),q=(0,t.up)("q-responsive"),_=(0,t.up)("q-input"),h=(0,t.up)("q-avatar"),Q=(0,t.up)("q-item-section"),Z=(0,t.up)("q-item-label"),z=(0,t.up)("q-item"),j=(0,t.up)("q-select"),I=(0,t.up)("q-spinner"),L=(0,t.up)("q-card-section"),x=(0,t.up)("q-card"),W=(0,t.up)("BackgroundImage"),C=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(C,{class:"flex column"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{"full-height":""},{default:(0,t.w5)((()=>[(0,t._)("div",{style:(0,s.j5)({paddingTop:e.$q.screen.gt.md?"3rem":"4rem"}),class:"row full-width bg-transparent hide-scrollbar"},[(0,t.Wm)(x,{class:"col-12 col-md-6 col-lg-4 col-xl-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"q-pa-xl q-my-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t._)("div",i,[(0,t.Wm)(q,{ratio:1/4,class:"col-3"},{default:(0,t.w5)((()=>[e.isLoaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:0,type:"QAvatar",style:{"z-index":"0"}})),e.isLoaded?((0,t.wg)(),(0,t.j4)(b,{key:1,dense:"",flat:"",round:"",style:{"z-index":"0"},onClick:e.editAvatar},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{src:e.avatar?e.avatar:null,class:"bg-grey","initial-ratio":"1",style:{"border-radius":"50%"}},{default:(0,t.w5)((()=>[e.avatar?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(f,{key:0,class:"absolute-center",color:"white",name:"mdi-account-edit",size:"6vw"}))])),_:1},8,["src"])])),_:1},8,["onClick"])):(0,t.kq)("",!0)])),_:1})]),(0,t._)("div",n,[(0,t._)("div",d,(0,s.zw)(e.i18n("labels.username")),1),e.isLoaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:0,class:"full-width",type:"QInput"})),e.isLoaded?((0,t.wg)(),(0,t.j4)(_,{key:1,class:"full-width",placeholder:e.i18n("placeholders.username"),modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=l=>e.username=l),style:{"font-size":"0.7rem"}},null,8,["placeholder","modelValue"])):(0,t.kq)("",!0)]),(0,t._)("div",r,[(0,t._)("div",u,(0,s.zw)(e.i18n("labels.motto")),1),e.isLoaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:0,class:"full-width",type:"QInput"})),e.isLoaded?((0,t.wg)(),(0,t.j4)(_,{key:1,class:"full-width",placeholder:e.i18n("placeholders.motto"),modelValue:e.motto,"onUpdate:modelValue":l[1]||(l[1]=l=>e.motto=l),style:{"font-size":"0.7rem"}},null,8,["placeholder","modelValue"])):(0,t.kq)("",!0)]),(0,t._)("div",c,[(0,t._)("div",m,(0,s.zw)(e.i18n("labels.region")),1),e.isLoaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:0,class:"full-width",type:"QInput"})),e.isLoaded?((0,t.wg)(),(0,t.j4)(j,{key:1,class:"full-width","display-value":e.region?e.region.label:e.i18n("placeholders.region"),options:e.flags,modelValue:e.region,"onUpdate:modelValue":l[2]||(l[2]=l=>e.region=l),style:{"font-size":"0.7rem"}},{prepend:(0,t.w5)((()=>[(0,t.Wm)(h,{class:(0,s.C_)(e.region?`fi ${e.region.class}`:void 0),color:e.region?void 0:"primary",icon:e.region?void 0:"mdi-help",rounded:"",size:"1.25rem","text-color":"white"},null,8,["class","color","icon"])])),option:(0,t.w5)((e=>[(0,t.Wm)(z,(0,s.vs)((0,t.F4)(e.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:(0,s.C_)(`fi ${e.opt.class}`),rounded:"",size:"sm"},null,8,["class"])])),_:2},1024),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["display-value","options","modelValue"])):(0,t.kq)("",!0)]),e.isLoaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:0,class:"btn-disabled full-width",type:"QBtn",size:"2.5rem"})),e.isLoaded?((0,t.wg)(),(0,t.j4)(b,{key:1,label:e.i18n("labels.submit"),loading:e.isSubmitLoading,class:"btn-primary full-width","no-caps":"",padding:"0.4rem",size:"1rem",unelevated:"",onClick:e.submit},null,8,["label","loading","onClick"])):(0,t.kq)("",!0),e.isLoaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:2,class:"btn-disabled full-width",type:"QBtn",size:"2rem"})),e.isLoaded?((0,t.wg)(),(0,t.j4)(b,{key:3,class:"btn-secondary full-width",dense:"",flat:"",label:e.i18n("labels.resetPassword"),"no-caps":"",padding:"0.35rem",size:"0.75rem",onClick:e.resetPassword},{loading:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t.Wm)(I,{class:"on-left",color:"primary"}),(0,t.Uk)(" "+(0,s.zw)(e.i18n("labels.sendingCode")),1)])])),_:1},8,["label","onClick"])):(0,t.kq)("",!0)])])),_:1})])),_:1}),(0,t.Wm)(x,{class:"col-grow q-mt-md q-mt-md-none q-ml-md-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"q-pa-xl q-my-lg"})])),_:1})],4)])),_:1})])),_:1})}a(9665);var w=a(1446),v=a(499),y=a(7712),f=a(1569),k=a(4958),b=a(9514),q=a(309),_=a(3012),h=a(9765),Q=a(8339),Z=a(2219);const z=(0,t.aZ)({name:"ProfilePage",components:{BackgroundImage:q.Z},setup(){const e=(0,f.useApi)(),l=(0,y.QT)({useScope:"global"}),a=(0,k.n)(),s=(0,w.Z)(),o=(0,Q.tv)(),{query:i}=(0,Q.yj)(),n=(0,v.iH)(""),d=(0,v.iH)(""),r=(0,v.iH)(""),u=(0,v.iH)(null),c=(0,v.iH)(!1),m=(0,v.iH)(!1);(0,t.bv)((async()=>{let t;if(i.playerId)await(0,h.P)((async()=>{t=(await e.player.getInfo(null,i.playerId)).data,t.avatar=(await e.player.getAvatar(null,i.playerId)).data}),s,l.t);else{if(await a.check(),!a.loggedIn)return void await o.push({name:"login"});t=a.info}n.value=t.avatar,d.value=t.username,r.value=t.motto,u.value=b.i.find((e=>e.value===t.region)),c.value=!0}));const p=e=>l.t("pages.profile."+e),g=()=>{s.dialog({component:_.Z,componentProps:{}}).onOk((e=>{n.value=e}))},q=async()=>{m.value=!0,console.log(a.accessToken),await(0,h.P)((async()=>{await e.player.updateInfo(a.accessToken,{avatar:n.value?n.value:void 0,username:d.value?d.value:void 0,motto:r.value?r.value:void 0,region:u.value?u.value.value:void 0}),await a.update(),m.value=!1,s.notify({type:"positive",message:p("notifications.submitSuccess")})}),s,l.t),m.value=!1},z=async()=>{await(0,h.P)((async()=>{s.dialog({component:Z.Z,componentProps:{type:"reset"}})}),s,l.t)};return{flags:b.i,avatar:n,motto:r,username:d,region:u,isLoaded:c,isSubmitLoading:m,i18n:p,editAvatar:g,submit:q,resetPassword:z}}});var j=a(1639),I=a(9885),L=a(4458),x=a(3190),W=a(705),C=a(7133),P=a(8879),S=a(1487),V=a(2857),A=a(3119),H=a(6997),T=a(1357),B=a(490),U=a(1233),$=a(3115),F=a(3940),O=a(9984),R=a.n(O);const D=(0,j.Z)(z,[["render",g],["__scopeId","data-v-415913f1"]]),E=D;R()(z,"components",{QPage:I.Z,QCard:L.Z,QCardSection:x.Z,QResponsive:W.Z,QSkeleton:C.ZP,QBtn:P.Z,QImg:S.Z,QIcon:V.Z,QInput:A.Z,QSelect:H.Z,QAvatar:T.Z,QItem:B.Z,QItemSection:U.Z,QItemLabel:$.Z,QSpinner:F.Z})}}]);